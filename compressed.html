<!doctype html> <html> <head> <meta charset='utf-8'/> <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no'/> <link rel='shortcut icon' type='image/x-icon' href='//tc2000.fly.dev/images/favicon.ico'/> <style>
  :root{--aqua:#7fdbff;--black:#111;--blue:#0074d9;--fuchsia:#f012be;--gray:#aaa;--green:#2ecc40;--lime:#01ff70;--maroon:#85144b;--navy:#001f3f;--olive:#3d9970;--orange:#ff851b;--purple:#b10dc9;--red:#ff4136;--silver:#ddd;--teal:#39cccc;--white:#fff;--yellow:#ffdc00}body{display:flex;flex-direction:column;justify-content:center;align-items:center}a:link{color:var(--blue)}a:visited{color:darken(var(--blue),20%)}a:hover{color:lighten(var(--blue),20%)}a:active{color:lighten(var(--blue),25%)}.icon{margin:0;width:1.5rem;height:1.5rem}.status-indicator{position:absolute;display:flex;justify-content:center;align-items:center;left:.25rem;top:.25rem;border-radius:100%;width:48px;height:48px;background-color:#343434;z-index:1}.status-indicator.connected .icon{fill:var(--blue)}.status-indicator.configuring .icon{fill:#ff0080}.status-indicator.running .icon{fill:var(--green)}.status-indicator.offline .icon{fill:var(--red)}.status-indicator.interactive .icon{fill:var(--white)}.status-indicator.random0 .icon{fill:var(--aqua)}.status-indicator.random1 .icon{fill:var(--blue)}.status-indicator.random2 .icon{fill:var(--fuschia)}.status-indicator.random3 .icon{fill:var(--lime)}.status-indicator.random4 .icon{fill:var(--orange)}.status-indicator.random5 .icon{fill:var(--purple)}.status-indicator.random6 .icon{fill:var(--yellow)}.status-indicator.random7 .icon{fill:var(--olive)}.status-indicator.random8 .icon{fill:var(--teal)}.status-indicator.random9 .icon{fill:var(--maroon)}button{display:flex;justify-content:center;align-items:center;background-color:var(--blue);color:var(--white);padding:1rem 1.5rem;border:none;min-width:250px;font-size:1rem;outline:0;cursor:pointer}button:hover{background-color:lighten(var(--blue),20%)}button[disabled],button[disabled]:hover{background-color:var(--gray)}button .icon{margin-right:.5rem;filter:invert(100%) brightness(100%);width:1rem;height:1rem}body{font-size:16px;padding:0;margin:0}.menu nav{display:none;margin-top:60px;z-index:2;width:100vw;height:100vh;flex-direction:column;justify-content:space-between;align-items:center}.menu .menu-toggle{position:absolute;top:0;right:0;padding:1rem;min-width:0;align-self:flex-end;margin-bottom:1rem;z-index:999}.menu-toggle .icon{margin:0}.menu ul{z-index:3;list-style-type:none;list-style-position:inside;padding:0;width:90%;margin:0}.menu .menu-toggle .icon:last-child{display:none}.menu.open .menu-toggle .icon:last-child{display:block}.menu.open .menu-toggle .icon:first-child{display:none}.menu.open nav{background-color:var(--white);display:flex}.menu li{display:block;width:100%;margin:0 0 1rem}.menu li button{width:100%}.poker-table{position:relative;width:375px;height:653px;background-image:url(//tc2000.fly.dev/images/poker-table.png);background-repeat:no-repeat;background-position:center center;color:var(--white);font-family:sans-serif}.poker-table p{color:var(--white);text-align:center;margin-top:15rem}.arcade-button{display:block;position:absolute;min-width:0;padding:0;width:48px;height:48px;border-radius:50%;background-color:#888;border:4px solid #333;z-index:2}.arcade-button.selected{background-color:#fff;border-color:var(--green)}.arcade-button[player='0']{left:282px;top:298px}.arcade-button[player='1']{left:282px;top:411px}.arcade-button[player='2']{left:260px;top:517px}.arcade-button[player='3']{left:68px;top:517px}.arcade-button[player='4']{left:36px;top:411px}.arcade-button[player='5']{left:36px;top:298px}.arcade-button[player='6']{left:36px;top:186px}.arcade-button[player='7']{left:68px;top:85px}.arcade-button[player='8']{left:260px;top:85px}.arcade-button[player='9']{left:282px;top:186px}.colored-buttons .arcade-button[player='0']{border-color:var(--red)}.colored-buttons .arcade-button[player='1']{border-color:var(--orange)}.colored-buttons .arcade-button[player='2']{border-color:var(--yellow)}.colored-buttons .arcade-button[player='3']{border-color:var(--green)}.colored-buttons .arcade-button[player='4']{border-color:var(--blue)}.colored-buttons .arcade-button[player='5']{border-color:var(--purple)}.colored-buttons .arcade-button[player='6']{border-color:var(--olive)}.colored-buttons .arcade-button[player='7']{border-color:var(--teal)}.colored-buttons .arcade-button[player='8']{border-color:var(--fuchsia)}.colored-buttons .arcade-button[player='9']{border-color:var(--maroon)}.arcade-button span{color:var(--black)}.action-button{position:absolute;left:86px;width:200px;min-width:200px;display:none}.action-button.visible{display:block;font-weight:800}.action-button:first-child{top:242px}.action-button:nth-child(2){top:342px}.action-button:nth-child(4){top:410px}
</style> <title>TC-2000</title> </head> <body> <div class='status-indicator offline'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M3.75 0c-1.38 0-2.66.4-3.75 1.09l.53.81c.93-.59 2.03-.91 3.22-.91 1.2 0 2.32.31 3.25.91l.53-.81c-1.09-.7-2.4-1.09-3.78-1.09zm0 3c-.79 0-1.5.23-2.13.63l.53.84c.47-.3 1-.47 1.59-.47.59 0 1.16.17 1.63.47l.53-.84c-.62-.39-1.37-.63-2.16-.63zm0 3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z'/> </svg> </div> <div class='menu'> <button class='menu-toggle' type='button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M0 0v1h8v-1h-8zm0 2.97v1h8v-1h-8zm0 3v1h8v-1h-8z' transform='translate(0 1)'/> </svg> <svg class='icon' ='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M4 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm-1.5 1.78l1.5 1.5 1.5-1.5.72.72-1.5 1.5 1.5 1.5-.72.72-1.5-1.5-1.5 1.5-.72-.72 1.5-1.5-1.5-1.5.72-.72z'/> </svg> </button> <nav> <ul> <li> <button type='button' id='configure-button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M5.5 0c-.51 0-.95.35-1.22.88.45.54.72 1.28.72 2.13 0 .29-.03.55-.09.81.19.11.38.19.59.19.83 0 1.5-.9 1.5-2s-.67-2-1.5-2zm-3 1c-.83 0-1.5.9-1.5 2s.67 2 1.5 2 1.5-.9 1.5-2-.67-2-1.5-2zm4.75 3.16c-.43.51-1.02.82-1.69.84.27.38.44.84.44 1.34v.66h2v-1.66c0-.52-.31-.97-.75-1.19zm-6.5 1c-.44.22-.75.67-.75 1.19v1.66h5v-1.66c0-.52-.31-.97-.75-1.19-.45.53-1.06.84-1.75.84s-1.3-.32-1.75-.84z'/> </svg> Configure </button> </li> <li> <button type='button' id='interactive-button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M3.5 0c-1.19 0-1.98 1.69-1.19 2.5-.09.07-.2.14-.28.22l-1.31-.66a.5.5 0 0 0-.34-.06.5.5 0 0 0-.09.94l1.16.56c-.09.16-.19.33-.25.5h-.69a.5.5 0 0 0-.09 0 .5.5 0 1 0 .09 1h.5c0 .23.02.45.06.66l-.78.41a.5.5 0 1 0 .44.88l.66-.34c.25.46.62.85 1.03 1.09.35-.19.59-.44.59-.72v-1.44a.5.5 0 0 0 0-.09v-.81a.5.5 0 0 0 0-.22c.05-.23.26-.41.5-.41.28 0 .5.22.5.5v.88a.5.5 0 0 0 0 .09v.06a.5.5 0 0 0 0 .09v1.34c0 .27.24.53.59.72.41-.25.79-.63 1.03-1.09l.66.34a.5.5 0 1 0 .44-.88l-.78-.41c.04-.21.06-.43.06-.66h.5a.5.5 0 1 0 0-1h-.69c-.06-.17-.16-.34-.25-.5l1.16-.56a.5.5 0 0 0-.31-.94.5.5 0 0 0-.13.06l-1.31.66c-.09-.08-.19-.15-.28-.22.78-.83 0-2.5-1.19-2.5z'/> </svg> Interactive </button> </li> <li> <button type='button' id='reset-button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M4 0c-1.65 0-3 1.35-3 3h-1l1.5 2 1.5-2h-1c0-1.11.89-2 2-2v-1zm2.5 1l-1.5 2h1c0 1.11-.89 2-2 2v1c1.65 0 3-1.35 3-3h1l-1.5-2z' transform='translate(0 1)'/> </svg> Reset </button> </li> <li> <button type='button' id='randomize-player-button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M4 0c-1.1 0-2 1.12-2 2.5s.9 2.5 2 2.5 2-1.12 2-2.5-.9-2.5-2-2.5zm-2.09 5c-1.06.05-1.91.92-1.91 2v1h8v-1c0-1.08-.84-1.95-1.91-2-.54.61-1.28 1-2.09 1-.81 0-1.55-.39-2.09-1z'/> </svg> Random player </button> </li> <li> <button type='button' id='color-config-button'> <svg class='icon' xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'> <path d='M3.5 0l-.5 1.19c-.1.03-.19.08-.28.13l-1.19-.5-.72.72.5 1.19c-.05.1-.09.18-.13.28l-1.19.5v1l1.19.5c.04.1.08.18.13.28l-.5 1.19.72.72 1.19-.5c.09.04.18.09.28.13l.5 1.19h1l.5-1.19c.09-.04.19-.08.28-.13l1.19.5.72-.72-.5-1.19c.04-.09.09-.19.13-.28l1.19-.5v-1l-1.19-.5c-.03-.09-.08-.19-.13-.28l.5-1.19-.72-.72-1.19.5c-.09-.04-.19-.09-.28-.13l-.5-1.19h-1zm.5 2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z'/> </svg> <span>Colored Buttons</span> </button> </li> </ul> </nav> </div> <div class='poker-table'> <p>Players:<span id='player-count'>0</span></p> <button type='button' class='action-button save'>Save</button> <button type='button' class='action-button clear-all'>Clear</button> <button type='button' class='action-button cancel'>Cancel</button> <button type='button' class='action-button quit-interactive'>Quit</button> <button player='0' type='button' class='arcade-button'></button> <button player='1' type='button' class='arcade-button'></button> <button player='2' type='button' class='arcade-button'></button> <button player='3' type='button' class='arcade-button'></button> <button player='4' type='button' class='arcade-button'></button> <button player='5' type='button' class='arcade-button'></button> <button player='6' type='button' class='arcade-button'></button> <button player='7' type='button' class='arcade-button'></button> <button player='8' type='button' class='arcade-button'></button> <button player='9' type='button' class='arcade-button'></button> </div> <script type='text/javascript'>
  window.addEventListener('load',(()=>{function e(e){const t=parseInt(e.getAttribute('player'),10);return()=>{P===R.CONFIGURING&&(function e(t){q.includes(t)?q=q.filter((e=>e!==t)):q.push(t)}(t),n({players:q,playerCount:q.length,currentPlayerIndex:0,currentPlayer:q[0],status:P,configured:T}),o(),r()),P===R.INTERACTIVE&&(q.includes(t)?q=q.filter((e=>e!==t)):q.push(t),n({players:q,currentPlayer:t,currentPlayerIndex:0,playerCount:q.length}),o(),r())}}function t(e){s(e).classList.add('selected')}function n(e){const t={...c(),...e};return T=t.configured,S=t.currentPlayer,k=t.currentPlayerIndex,G=t.playerCount,q=t.players,P=t.status,t}function r(){F.send(JSON.stringify(c()))}function c(){return{configured:T,currentPlayer:S,currentPlayerIndex:k,playerCount:G,players:q,status:P}}function o(){!function e(){null==q&&console.log('renderPlayerCount players undefined'),I.innerText=q?.length}(),function n(){(function e(){y.classList.remove('visible'),E.classList.remove('visible'),v.classList.remove('visible')})(),l(),P===R.RANDOMIZING&&function n(e){s(e).classList.toggle('selected')}(S),P===R.CONFIGURING&&(function r(){y.classList.add('visible'),E.classList.add('visible'),v.classList.add('visible')}(),q.forEach(((e,n)=>{!function r(e,t){const n=function r(e,t,n={}){const r=document.createElement(e);return Object.keys(n).forEach((e=>{'className'===e?r.classList.add(n[e]):r.setAttribute(e,n[e])})),'string'==typeof t||'number'==typeof t?r.innerText=t:r.appendChild(t),r}('span',t+1),c=document.querySelector(`.arcade-button[player='${e}']`);c.appendChild(n)}(e,n),t(e)}))),P===R.INTERACTIVE&&(m.classList.add('visible'),q.forEach((e=>{t(e)}))),P!==R.CONNECTED&&P!==R.RUNNING||t(S)}(),function r(){(function e(){h.forEach((e=>{L.classList.remove(e)}));for(let e=0;e<10;e++)L.classList.remove(`random${e}`)})(),P===R.RANDOMIZING?L.classList.add(`random${S}`):L.classList.add(h[P])}(),function c(){switch(P){case R.CONFIGURING:case R.INTERACTIVE:i({except:[p,f]});break;case R.RANDOMIZING:i();break;default:!function e({except:t,only:n}={}){const r=Array.isArray(n)?n.map((e=>e.getAttribute('id'))):n?[n.getAttribute('id')]:[],c=Array.isArray(t)?t.map((e=>e.getAttribute('id'))):t?[t.getAttribute('id')]:[];O.forEach((e=>{const t=e.getAttribute('id');c.includes(t)||(r.length&&onyFilter.includes(t)&&e.removeAttribute('disabled'),0===r.length&&e.removeAttribute('disabled'))}))}()}}()}function i({except:e,only:t}={}){const n=Array.isArray(t)?t.map((e=>e.getAttribute('id'))):t?[t.getAttribute('id')]:[],r=Array.isArray(e)?e.map((e=>e.getAttribute('id'))):e?[e.getAttribute('id')]:[];O.forEach((e=>{const t=e.getAttribute('id');r.includes(t)||(0===n.length&&e.setAttribute('disabled',''),n.length&&onyFilter.includes(t)&&e.setAttribute('disabled',''))}))}function s(e){return a.find((t=>t.getAttribute('player')==`${e}`))||a[0]}function u(){g.classList.remove('open')}function l(e=!0){a.forEach((t=>{e&&t.querySelector('span')?.remove(),t.classList.remove('selected')}))}const a=Array.from(document.querySelectorAll('.arcade-button')),d=document.querySelector('#interactive-button'),y=document.querySelector('.action-button.clear-all'),f=document.querySelector('#color-config-button'),g=document.querySelector('.menu'),b=document.querySelector('.menu-toggle'),I=document.querySelector('#player-count'),N=document.querySelector('.poker-table'),p=document.querySelector('#reset-button'),m=document.querySelector('.action-button.quit-interactive'),E=document.querySelector('.action-button.save'),v=document.querySelector('.action-button.cancel'),L=document.querySelector('.status-indicator'),A=document.querySelector('#configure-button'),C=document.querySelector('#randomize-player-button'),O=[A,d,p,C,f],R={OFFLINE:0,CONNECTED:1,CONFIGURING:2,RUNNING:3,RANDOMIZING:4,ERROR:5,INTERACTIVE:6,CONTROL:7},h=['offline','connected','configuring','running','randomizing','error','interactive','control'];let S=0,k=0,G=0,q=[],P=R.OFFLINE,T=!1,x={currentPlayer:S,currentPlayerIndex:k,playerCount:G,players:[],status:R.OFFLINE,configured:!1},F=new WebSocket('ws://tc2000:81');F.onmessage=function(e){!function t({data:e}){n(JSON.parse(e)),o()}(e)},F.onclose=function(){console.log('lost connection, reconnecting in 5 seconds'),F=null,setTimeout((()=>F=new WebSocket('ws://tc2000:81')),5e3)},F.addEventListener('disconnected',(()=>{console.log('socket is closed')})),F.addEventListener('error',(e=>{console.log('socket error'),console.error(e)})),f.addEventListener('click',(function U(){const e=f.querySelector('span'),t=N.classList.contains('colored-buttons')?'Colored Buttons':'Uncolored Buttons';e.innerText=t,N.classList.toggle('colored-buttons'),u()})),b.addEventListener('click',(function D(){g.classList.toggle('open')})),d.addEventListener('click',(function w(){x=c(),n({status:R.INTERACTIVE,players:[],currentPlayer:0,currentPlayerIndex:0,playerCount:0}),r(),o(),u()})),y.addEventListener('click',(function M(){n({players:[],playerCount:0,currentPlayerIndex:0,currentPlayer:0,status:R.CONFIGURING,configured:!1}),o(),r()})),p.addEventListener('click',(function V(){n({players:[],currentPlayerIndex:0,currentPlayer:0,status:R.CONNECTED,playerCount:0,configured:!1}),o(),r(),u()})),E.addEventListener('click',(function Z(){n({players:q,playerCount:q.length,currentPlayerIndex:0,currentPlayer:0,status:R.RUNNING,configured:!0}),o(),x={},r()})),a.forEach((t=>{t.addEventListener('click',e(t))})),C.addEventListener('click',(function $(){n({status:R.RANDOMIZING}),l(!1),o(),u(),r()})),v.addEventListener('click',(function z(){n(x),r(),o()})),A.addEventListener('click',(function B(){x=c(),n({status:R.CONFIGURING}),r(),o(),u()})),m.addEventListener('click',(function J(){console.log('handleQuitInteractiveClick'),m.classList.remove('visible'),n(x),r(),o()}))}));
</script> </body> </html>